---
phase: 26-next-js-16-migration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - next.config.js
autonomous: true
requirements:
  - MIG-01
must_haves:
  truths:
    - "next@16 is installed and resolves without errors"
    - "next build --webpack succeeds with zero errors"
    - "eslint config removed from next.config.js without affecting lint behavior"
  artifacts:
    - path: "package.json"
      provides: "Next.js 16 dependency and --webpack build script"
      contains: "next build --webpack"
    - path: "next.config.js"
      provides: "Valid Next.js 16 config without eslint key"
  key_links:
    - from: "package.json"
      to: "next.config.js"
      via: "webpack config requires --webpack flag in build script"
      pattern: "next build --webpack"
---

<objective>
Upgrade Next.js from 15 to 16 and resolve configuration breaking changes.

Purpose: Get the framework upgraded so all subsequent work targets the final dependency versions.
Output: Working Next.js 16 build with updated package.json and next.config.js.
</objective>

<execution_context>
@C:/Users/abdie/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/abdie/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/26-next-js-16-migration/26-RESEARCH.md
@package.json
@next.config.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Upgrade Next.js and update config files</name>
  <files>package.json, next.config.js</files>
  <action>
1. Run `npm install next@latest react@latest react-dom@latest`. If ERESOLVE peer dependency errors occur (likely from next-auth beta.30), retry with `--legacy-peer-deps`.

2. In `package.json`, update the `build` script to add `--webpack` flag:
   - Change: `next build` to `next build --webpack`
   - The full build script becomes: `node ./scripts/cleanup-prose-mdx && prettier --write "pages/**/*.js" "components/**/*.js" "lib/**/*.js" "layouts/**/*.js" "app/**/*.js" && next build --webpack && node ./scripts/generate-sitemap`
   - Also update the `analyze` script: `cross-env ANALYZE=true next build --webpack`

3. In `next.config.js`, remove the `eslint` block entirely:
   ```js
   // REMOVE these 3 lines:
   eslint: {
     dirs: ['pages', 'components', 'lib', 'layouts', 'scripts', 'app'],
   },
   ```
   The project already uses `eslint` directly in the `lint` script, so removing this has zero effect on linting.

4. Verify `npm run lint` still works after config change.
  </action>
  <verify>
- `node -e "console.log(require('next/package.json').version)"` shows 16.x
- `npm run lint` completes without config errors
  </verify>
  <done>Next.js 16 installed, build script has --webpack flag, eslint config removed from next.config.js, lint still works</done>
</task>

<task type="auto">
  <name>Task 2: Verify build succeeds on Next.js 16</name>
  <files>package.json</files>
  <action>
1. Run `npm run build` and confirm it completes successfully with zero errors.

2. If the build fails:
   - Check for Turbopack errors (should be resolved by --webpack flag)
   - Check for eslint config warnings (should be resolved by removal)
   - Check for prettier formatting errors in AdminHeader.js, members/page.js, payments/page.js -- if found, run `npx prettier --write` on those files first
   - Check for any deprecation errors from Next.js 16 breaking changes

3. If build succeeds, verify that both pages/ routes (gallery, 404, API routes) and app/ routes (admin, blog, auth) are compiled without errors in the build output.
  </action>
  <verify>
- `npm run build` exits with code 0
- Build output shows both pages/ and app/ routes compiled
  </verify>
  <done>Production build succeeds on Next.js 16 with --webpack, both page routers compile cleanly</done>
</task>

</tasks>

<verification>
1. `node -e "console.log(require('next/package.json').version)"` prints 16.x
2. `npm run build` succeeds (exit code 0)
3. `npm run lint` succeeds
4. `next.config.js` does NOT contain the string `eslint`
5. `package.json` build script contains `--webpack`
</verification>

<success_criteria>
Next.js 16 is installed, configured with --webpack flag, eslint config removed, and production build completes successfully.
</success_criteria>

<output>
After completion, create `.planning/phases/26-next-js-16-migration/26-01-SUMMARY.md`
</output>
